<view class="edit" hidden="{{!isShowDeleteAndCollection}}">
  <view class="btn" bindtap="batchDelete">删除</view>
  <view class="btn" bindtap="batchAddCollection">加入收藏夹</view>
</view>

<view class="item-list" wx:for="{{carts}}" wx:key="key">
  <zan-panel>
    <view class='item-content'>
      <view class="select-button">
        <zan-icon style="color:#ff0000" bindtap="changeSelected" data-index="{{index}}" class="icon" type="{{item.isSelected ? 'checked':'check'}}">
        </zan-icon>
      </view>
      <view class='center-info'>
        <view class='image-warpper' bindtap="goGoodsDetail" data-id="{{item.goods_info.id}}">
          <image class='image' src='{{item.goods_info.thum}}' mode="widthFix"></image>
        </view>
        <view class='title-warpper'>
          <block wx:if="{{!item.isEdit}}">
            <view class="left">
              <view class='title'>{{item.goods_info.name}}</view>
              <view class='intro'>{{item.goods_info.intro}}</view>
              <view class='sku' data-index="{{index}}" data-id="{{item.id}}" data-goodsinfo="{{item.goods_info}}" data-sendfindsku="{{item.spec_group_info}}" bindbtnclick='openBottomPopup'>
                规格: {{item.spec_group_info.spec_option_group?item.spec_group_info.spec_option_group:'无'}}
              </view>
              <view class='price-warpper'>
                <view class='price wancll-goods-list-price'>
                  <text class='price wancll-goods-list-price-icon'>￥</text> {{item.spec_group_info.sell_price?item.spec_group_info.sell_price:item.goods_info.sell_price * item.num}}
                </view>
              </view>
            </view>
            <view class='right'>
              <view>
                <zan-icon class="edit" type="edit" bindtap="editCart" data-index="{{index}}"></zan-icon>
              </view>
              <text class="num">×{{item.num}}</text>
            </view>
          </block>
          <!-- 编辑模式 -->
          <block wx:else>
            <view class="edit-mode">
              <view class="left">
                <view class="top">
                  <view  class="box" bindtap="changeNum" data-index="{{index}}" data-type="minus">-</view>
                  <view class="box">{{item.num}}</view>
                  <view class="box" bindtap="changeNum" data-index="{{index}}" data-type="plus">+</view>
                </view>
                <view class="bottom box" bindtap="openSkuShow" data-index="{{index}}">
                  <view class="word">规格:{{item.spec_group_info.spec_option_group || '规格已修改,请重新选择'}}</view>
                </view>
              </view>
              <view class="right" bindtap="editCart" data-index="{{index}}">完成</view>
            </view>
          </block>
        </view>
      </view>
    </view>
  </zan-panel>
</view>

<zan-panel wx:if="{{!FPage.noContent}}">
  <view class="select-all">
    <view class="select" bindtap="selectAll">
      <zan-icon style="color:#ff0000" class="icon" type="{{isSelectedAll ? 'checked' : 'check'}}"></zan-icon>
      <text> 全选</text>
    </view>
    <view class="price">
      <text style="color:#777">合计：</text>
      <text class="wancll-text-price wancll-font-size-15">￥</text>
      <text class="wancll-text-price wancll-font-size-20">{{totalPrice}}</text>
    </view>
    <view class="send wancll-text-white" bindtap="goOrderConfirm">
      去结算
    </view>
  </view>
</zan-panel>

<view wx:if="{{FPage.noContent}}" class="no-content-image">
  <image mode="widthFix" src="{{FPage.noContentImg}}"></image>
  <view class="wancll-text-pray wancll-margin-t-10">啊哦,这里什么都没有~</view>
</view>

<!-- 规格组件 -->
<block wx:if="{{selectedCart.goods_info.spec_info.length}}">
  <zan-popup show="{{ isShowSkuPopup }}" type="bottom" bind:close="closeSkuShow">
    <view class="pop-example__container pop-example__container--bottom">
      <wancll-selectsku id="selectsku" goodsinfo="{{selectedCart.goods_info}}" sendSelectedSku="{{selectedCart.spec_group_info}}" bind:confirm="selectSpec" bind:close="closeSkuShow">
      </wancll-selectsku>
    </view>
  </zan-popup>
</block>